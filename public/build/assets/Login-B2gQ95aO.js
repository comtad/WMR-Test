import{s as C,r as X,j as S,k as Y,l as Z,m as ee,p as B,q as D,v as te,d as l,x as se,y as T,u as ae,c as P,o as w,w as x,a as f,b as u,h as oe,g as h,i as V,t as j,e as le,n as A,f as k,F as ne,z as re,A as z}from"./app-DFs_qqWh.js";import{_ as ie}from"./GuestLayout-WltUFRFq.js";import{_ as U,a as W,b as O}from"./TextInput-CahrkW9v.js";import{P as ue}from"./PrimaryButton-CQZCa0m1.js";import{_ as ce,P as de,A as E,S as pe,F as fe,T as L,a as R}from"./flowbite-vue-9Ai0uFnT.js";import"./ApplicationLogo-D97gtjzO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function I(e){return Y()?(Z(e),!0):!1}const F=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const me=Object.prototype.toString,ve=e=>me.call(e)==="[object Object]";function ge(e){let s;function a(){return s||(s=e()),s}return a.reset=async()=>{const g=s;s=void 0,g&&await g},a}function $(e){return Array.isArray(e)?e:[e]}function ye(e,s,a={}){const{immediate:g=!0,immediateCallback:b=!1}=a,i=C(!1);let c=null;function t(){c&&(clearTimeout(c),c=null)}function o(){i.value=!1,t()}function n(...d){b&&e(),t(),i.value=!0,c=setTimeout(()=>{i.value=!1,c=null,e(...d)},S(s))}return g&&(i.value=!0,F&&n()),I(o),{isPending:X(i),start:n,stop:o}}function xe(e,s,a){return ee(e,s,{...a,immediate:!0})}const be=F?window:void 0,H=F?window.navigator:void 0;function we(e){var s;const a=S(e);return(s=a?.$el)!=null?s:a}function J(...e){const s=[],a=()=>{s.forEach(t=>t()),s.length=0},g=(t,o,n,d)=>(t.addEventListener(o,n,d),()=>t.removeEventListener(o,n,d)),b=B(()=>{const t=$(S(e[0])).filter(o=>o!=null);return t.every(o=>typeof o!="string")?t:void 0}),i=xe(()=>{var t,o;return[(o=(t=b.value)==null?void 0:t.map(n=>we(n)))!=null?o:[be].filter(n=>n!=null),$(S(b.value?e[1]:e[0])),$(l(b.value?e[2]:e[1])),S(b.value?e[3]:e[2])]},([t,o,n,d])=>{if(a(),!t?.length||!o?.length||!n?.length)return;const _=ve(d)?{...d}:d;s.push(...t.flatMap(p=>o.flatMap(r=>n.map(v=>g(p,r,v,_)))))},{flush:"post"}),c=()=>{i(),a()};return I(a),c}function _e(){const e=C(!1),s=te();return s&&D(()=>{e.value=!0},s),e}function K(e){const s=_e();return B(()=>(s.value,!!e()))}function G(e,s={}){const{controls:a=!1,navigator:g=H}=s,b=K(()=>g&&"permissions"in g),i=C(),c=typeof e=="string"?{name:e}:e,t=C(),o=()=>{var d,_;t.value=(_=(d=i.value)==null?void 0:d.state)!=null?_:"prompt"};J(i,"change",o,{passive:!0});const n=ge(async()=>{if(b.value){if(!i.value)try{i.value=await g.permissions.query(c)}catch{i.value=void 0}finally{o()}if(a)return se(i.value)}});return n(),a?{state:t,isSupported:b,query:n}:t}function he(e={}){const{navigator:s=H,read:a=!1,source:g,copiedDuring:b=1500,legacy:i=!1}=e,c=K(()=>s&&"clipboard"in s),t=G("clipboard-read"),o=G("clipboard-write"),n=B(()=>c.value||i),d=C(""),_=C(!1),p=ye(()=>_.value=!1,b,{immediate:!1});async function r(){let m=!(c.value&&q(t.value));if(!m)try{d.value=await s.clipboard.readText()}catch{m=!0}m&&(d.value=Q())}n.value&&a&&J(["copy","cut"],r,{passive:!0});async function v(m=S(g)){if(n.value&&m!=null){let y=!(c.value&&q(o.value));if(!y)try{await s.clipboard.writeText(m)}catch{y=!0}y&&N(m),d.value=m,_.value=!0,p.start()}}function N(m){const y=document.createElement("textarea");y.value=m??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function Q(){var m,y,M;return(M=(y=(m=document?.getSelection)==null?void 0:m.call(document))==null?void 0:y.toString())!=null?M:""}function q(m){return m==="granted"||m==="prompt"}return{isSupported:n,text:d,copied:_,copy:v}}const ke={class:"flex flex-col md:flex-row gap-6 max-w-6xl mx-auto p-4"},Se={class:"bg-white p-6 rounded-xl shadow-lg w-full md:w-2/5"},Ce={key:0,class:"mb-4 p-3 rounded-lg bg-green-50 text-green-700 text-center"},Te={class:"flex justify-end"},Ve={key:0},je={key:1},Me={class:"bg-white p-6 rounded-xl shadow-lg w-full md:w-3/5 flex flex-col"},Pe={class:"relative flex-grow min-h-[300px]"},Ae={key:0},Ee={key:1},Le={key:0,class:"absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center"},$e={key:1,class:"text-center py-10"},Be={class:"flex justify-center mt-6"},Re={__name:"Login",props:{status:{type:String,default:""}},setup(e){const s=T(!1),a=T(!1),{copy:g,isSupported:b}=he(),i=T([]),c=T(null),t=ae({email:"",password:""}),o=()=>{t.post(route("login"),{onFinish:()=>t.reset("password")})},n=async p=>{b&&(await g(`${p.email}:${p.password}`),c.value=p.id,setTimeout(()=>{c.value=null},2e3)),t.email=p.email,t.password=p.password},d=async()=>{s.value=!0;try{const p=await z.get("/api/users");i.value=p.data.data}catch(p){console.error("Ошибка загрузки пользователей:",p)}finally{s.value=!1}},_=async()=>{a.value=!0;try{const p=await z.get("/api/users/generate");i.value=p.data.data}catch(p){console.error("Ошибка генерации пользователей:",p)}finally{a.value=!1}};return D(d),(p,r)=>(w(),P(ie,null,{default:x(()=>[f(l(oe),{title:"Вход в систему"}),u("div",ke,[u("div",Se,[r[2]||(r[2]=u("div",{class:"text-center mb-6"},[u("h1",{class:"text-2xl font-bold text-gray-800"},"Добро пожаловать"),u("p",{class:"text-gray-600 mt-2"},"Введите свои учетные данные")],-1)),e.status?(w(),h("div",Ce,j(e.status),1)):V("",!0),u("form",{onSubmit:le(o,["prevent"]),class:"space-y-5"},[u("div",null,[f(U,{for:"email",value:"Электронная почта",class:"mb-1"}),f(W,{id:"email",type:"email",class:"w-full py-2.5 px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition",modelValue:l(t).email,"onUpdate:modelValue":r[0]||(r[0]=v=>l(t).email=v),required:"",autofocus:"",autocomplete:"username",placeholder:"user@example.com"},null,8,["modelValue"]),f(O,{class:"mt-1.5",message:l(t).errors.email},null,8,["message"])]),u("div",null,[f(U,{for:"password",value:"Пароль"}),f(W,{id:"password",type:"password",class:"w-full py-2.5 px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition",modelValue:l(t).password,"onUpdate:modelValue":r[1]||(r[1]=v=>l(t).password=v),required:"",autocomplete:"current-password",placeholder:"••••••••"},null,8,["modelValue"]),f(O,{class:"mt-1.5",message:l(t).errors.password},null,8,["message"])]),u("div",Te,[f(ue,{class:A(["px-6 py-2.5 font-medium",{"opacity-50":l(t).processing}]),disabled:l(t).processing},{default:x(()=>[l(t).processing?(w(),h("span",Ve,"Вход...")):(w(),h("span",je,"Войти"))]),_:1},8,["class","disabled"])])],32)]),u("div",Me,[r[8]||(r[8]=u("div",{class:"mb-4"},[u("h2",{class:"text-xl font-bold text-gray-800 flex items-center gap-2"},[k(" Тестовые пользователи "),u("span",{class:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full"}," Демо-режим ")]),u("p",{class:"text-gray-600 mt-1 text-sm"},' Нажмите "Скопировать" для автоматического заполнения данных ')],-1)),u("div",Pe,[f(l(ce),{striped:"",hoverable:"",class:"w-full"},{default:x(()=>[f(l(de),{class:"sticky top-0 bg-white"},{default:x(()=>[f(l(E),null,{default:x(()=>r[3]||(r[3]=[k("Email",-1)])),_:1,__:[3]}),f(l(E),null,{default:x(()=>r[4]||(r[4]=[k("Дата создания",-1)])),_:1,__:[4]}),f(l(E),{class:"w-32"},{default:x(()=>r[5]||(r[5]=[k("Действия",-1)])),_:1,__:[5]})]),_:1}),s.value?V("",!0):(w(),P(l(pe),{key:0},{default:x(()=>[(w(!0),h(ne,null,re(i.value,v=>(w(),P(l(fe),{key:v.id,class:A([{"bg-blue-50":c.value===v.id},"transition-colors"])},{default:x(()=>[f(l(L),{class:"font-medium truncate"},{default:x(()=>[k(j(v.email),1)]),_:2},1024),f(l(L),{class:"text-gray-500"},{default:x(()=>[k(j(v.created_at),1)]),_:2},1024),f(l(L),null,{default:x(()=>[f(l(R),{size:"xs",color:c.value===v.id?"green":"default",class:"w-full justify-center",onClick:N=>n(v)},{default:x(()=>[c.value===v.id?(w(),h("span",Ae,"Скопировано!")):(w(),h("span",Ee,"Скопировать"))]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}))]),_:1}),s.value?(w(),h("div",Le,r[6]||(r[6]=[u("p",{class:"text-gray-600"},"Загрузка данных...",-1)]))):V("",!0),!s.value&&i.value.length===0?(w(),h("div",$e,r[7]||(r[7]=[u("svg",{class:"w-16 h-16 text-gray-300 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),u("p",{class:"mt-4 text-gray-500"},"Нет тестовых пользователей",-1)]))):V("",!0)]),u("div",Be,[f(l(R),{color:"green",class:A(["px-5 py-2.5 font-medium",{"opacity-70":a.value}]),onClick:_,disabled:a.value},{default:x(()=>[u("span",null,j(a.value?"Генерация...":"Сгенерировать новых пользователей"),1)]),_:1},8,["disabled","class"])])])])]),_:1}))}};export{Re as default};
